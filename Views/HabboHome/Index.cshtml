@model KeplerCMS.Areas.MyHabbo.Models.HomeViewModel
@{
    var userData = (KeplerCMS.Data.Models.Users)ViewData["user"];
}
@section Styles {
    <link href="~/styles/myhabbo/style.css" rel="stylesheet" />
    <link href="~/styles/myhabbo/assets.css" rel="stylesheet" />
    <link href="~/styles/myhabbo/skins.css" rel="stylesheet" />
    <link href="~/styles/myhabbo/dialogs.css" rel="stylesheet" />
    <link href="~/styles/myhabbo/myhabbo2.css" rel="stylesheet" />
    <link href="~/styles/myhabbo/buttons.css" rel="stylesheet" />
}
@section ScriptsTop {
    <script src="~/js/myhabbo/libs2.js" type="text/javascript"></script>
    <script src="~/js/myhabbo/visual.js" type="text/javascript"></script>
    <script src="~/js/myhabbo/libs.js" type="text/javascript"></script>
    <script src="~/js/myhabbo/common.js" type="text/javascript"></script>
    <script src="~/js/myhabbo/fullcontent.js" type="text/javascript"></script>
    <script src="~/js/myhabbo/visual.js"></script>
    <script src="~/js/myhabbo/fullcontent.js"></script>


    <script src="~/js/myhabbo/homeview.js"></script>
    <script src="~/js/myhabbo/homeauth.js"></script>

    <script src="~/js/myhabbo/homeedit.js"></script>
}





<div id="mypage-top-nav">

    <div id="page-headline">
        <div id="page-headline-breadcrums">

        </div>
        <div id="page-headline-text">
            Habbo Home: Patrick
        </div>
    </div>
    <div class="box-tabs-container box-tabs-left clearfix">



        <a href="/home/edit/@Model.Home.Id" id="edit-button" class="new-button dark-button edit-icon" style="float:left"><b><span></span>Edit</b><i></i></a>


    </div>
</div>
<div id="mypage-wrapper">


    <div id="mypage-content">
        <div id="top-toolbar" class="clearfix">
            <ul>
                <li><a href="#" id="inventory-button">Inventory</a></li>
                <li><a href="#" id="webstore-button">Web Store</a></li>
            </ul>

            <form action="#" method="get" style="width: 50%">
                <a id="cancel-button" class="new-button red-button cancel-icon" href="#"><b><span></span>Cancel editing</b><i></i></a>

                <a id="save-button" class="new-button green-button save-icon" href="#"><b><span></span>Save changes</b><i></i></a>
            </form>
        </div>


        <div id="mypage-bg" class="@Model.Home.Background">

            <div id="playground-outer">
                <div id="playground">



                    @{
                        foreach (var item in Model.Items)
                        {
                            <partial name="~/Areas/MyHabbo/Views/Items/Item.cshtml" model=item />
                        }

                    }










                </div>

            </div>
        </div>

    </div>
</div>




<script language="JavaScript" type="text/javascript">

    initEditToolbar();
    initMovableItems();
    document.observe("dom:loaded", initDraggableDialogs);
    Utils.setAllEmbededObjectsVisibility('hidden');

</script>


<div id="edit-save" style="display:none;"></div>




<div id="edit-menu" class="menu">
    <div class="menu-header">
        <div class="menu-exit" id="edit-menu-exit"><img src="https://cdn.classichabbo.com/web-gallery/images/dialogs/menu-exit.gif" alt="" width="11" height="11" /></div>
        <h3>Edit</h3>

    </div>
    <div class="menu-body">
        <div class="menu-content">
            <form action="#" onsubmit="if (!window.__cfRLUnblockHandlers) return false; return false;" data-cf-modified-="">
                <div id="edit-menu-skins">
                    <select id="edit-menu-skins-select">
                        <option value="1" id="edit-menu-skins-select-defaultskin">Default</option>
                        <option value="6" id="edit-menu-skins-select-goldenskin">Golden</option>

                        <option value="3" id="edit-menu-skins-select-metalskin">Metal</option>
                        <option value="5" id="edit-menu-skins-select-notepadskin">Notepad</option>
                        <option value="2" id="edit-menu-skins-select-speechbubbleskin">Speech Bubble</option>
                        <option value="4" id="edit-menu-skins-select-noteitskin">Stickie Note</option>
                        @{
                            if (userData != null && userData.HasHabboClub)
                            {
                                <option value="8" id="edit-menu-skins-select-hc_pillowskin">HC Bling</option>
                                <option value="7" id="edit-menu-skins-select-hc_machineskin">HC Scifi</option>
                            }
                        }

                    </select>
                </div>
                <div id="edit-menu-stickie">

                    <p>Warning! If you click 'Remove', the note will be permanently deleted.</p>
                </div>
                <div id="rating-edit-menu">
                    <input type="button" id="ratings-reset-link"
                           value="Reset rating" />
                </div>
                <div id="highscorelist-edit-menu" style="display:none">
                    <select id="highscorelist-game">
                        <option value="">Select game</option>
                        <option value="1">Battle Ball: Rebound!</option>
                        <option value="2">SnowStorm</option>
                        <option value="0">Wobble Squabble</option>
                    </select>
                </div>
                <div id="edit-menu-remove-group-warning">
                    <p>This item belongs to another user. If you remove it, it will return to their inventory.</p>

                </div>
                <div id="edit-menu-gb-availability">
                    <select id="guestbook-privacy-options">
                        <option value="private">Friends only</option>
                        <option value="public" selected>Public</option>
                    </select>
                </div>
                <div id="edit-menu-trax-select">

                    <select id="trax-select-options"></select>
                </div>
                <div id="edit-menu-remove">
                    <input type="button" id="edit-menu-remove-button" value="Remove" />
                </div>
            </form>
            <div class="clear"></div>
        </div>
    </div>

    <div class="menu-bottom"></div>
</div>
<script language="JavaScript" type="text/javascript">
    Event.observe(window, "resize", function () { if (editMenuOpen) closeEditMenu(); }, false);
    Event.observe(document, "click", function () { if (editMenuOpen) closeEditMenu(); }, false);
    Event.observe("edit-menu", "click", Event.stop, false);
    Event.observe("edit-menu-exit", "click", function () { closeEditMenu(); }, false);
    Event.observe("edit-menu-remove-button", "click", handleEditRemove, false);
    Event.observe("edit-menu-skins-select", "click", Event.stop, false);
    Event.observe("edit-menu-skins-select", "change", handleEditSkinChange, false);
</script>





<script type="text/javascript">
    HabboView.run();
</script>



<script type="text/javascript">
    document.observe("dom:loaded", function () { initView(7975, 7975); });


    function isElementLimitReached() {
        if (getElementCount() >= 350) {
            showHabboHomeMessageBox("Error", "You have already reached the maximum number of elements on the page. Remove a sticker, note or widget to be able to place this item.", "Close");
            return true;
        }
        return false;
    }

    function cancelEditing(expired) {
        location.replace("/home/cancel/@Model.Home.Id" + (expired ? "?expired=true" : ""));
    }

    function getSaveEditingActionName() {
        return '/myhabbo/save';
    }

    function showEditErrorDialog() {
        var closeEditErrorDialog = function (e) { if (e) { Event.stop(e); } Element.remove($("myhabbo-error")); Overlay.hide(); }
        var dialog = Dialog.createDialog("myhabbo-error", "", false, false, false, closeEditErrorDialog);
        Dialog.setDialogBody(dialog, '<p>Error occurred! Please try again in couple of minutes.</p><p><a href="#" class="new-button" id="myhabbo-error-close"><b>Close</b><i></i></a></p><div class="clear"></div>');
        Event.observe($("myhabbo-error-close"), "click", closeEditErrorDialog);
        Dialog.moveDialogToCenter(dialog);
        Dialog.makeDialogDraggable(dialog);
    }


    function showSaveOverlay() {
        var invalidPos = getElementsInInvalidPositions();
        if (invalidPos.length > 0) {
            $A(invalidPos).each(function (el) { Element.scrollTo(el); Effect.Pulsate(el); });
            showHabboHomeMessageBox("Whoops! You can\'t do that!", "Sorry, but you can\'t place your stickers, notes or widgets here. Close the window to continue editing your page.", "Close");
            return false;
        } else {
            Overlay.show(null, 'Saving');
            return true;
        }
    }


</script>

<script language="JavaScript" type="text/javascript">

    initEditToolbar();
    initMovableItems();
    document.observe("dom:loaded", initDraggableDialogs);
    Utils.setAllEmbededObjectsVisibility('hidden');

</script>
